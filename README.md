# ARH REST API (a8i) - Advanced Request Handling REST API

`ARH API` (–¥–∞–ª–µ–µ `a8i`) ‚Äî –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö API-–∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ –æ–¥–∏–Ω HTTP-–≤—ã–∑–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –Ω–∞ –±–∞–∑–µ `REST API`.

–ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–µ–±-–∫–ª–∏–µ–Ω—Ç–æ–≤, –≥–¥–µ –≤–∞–∂–Ω–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–µ—Ä–≤–µ—Ä—É.

–ü–æ–ª—É—á–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å, —Å–æ—Ö—Ä–∞–Ω—è—è –≤—Å–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ `REST API`.


## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã](#-–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã)
- [–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞](#-–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞)
- [–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π](#-–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π)
- [–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è](#-–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è)
- [–í–æ–ø—Ä–æ—Å—ã](#-–í–æ–ø—Ä–æ—Å—ã)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#-–õ–∏—Ü–µ–Ω–∑–∏—è)


## –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

1. **–ö–ª–∏–µ–Ω—Ç** —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤.
2. **–ö–ª–∏–µ–Ω—Ç** –∫–æ–¥–∏—Ä—É–µ—Ç –∏—Ö –≤ `base64url` –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É –≤ –≤–∏–¥–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `?arc=<base64url>`.

–í–º–µ—Å—Ç–æ –¥–≤—É—Ö —Ä–∞–∑–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:
```http
GET /user/1
GET /comments?user=1&limit=5
```
–û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å:
```http
GET /user/1?arc=<json_base64url>
```
```javascript
let arc = {
  "requests": [
    {
      "name": "comments",
      "path": "/comments?user=1&limit=5"
    }
  ]
};
let arc64 = base64url(JSON.stringify(arc));
// –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥–∑–∞–ø—Ä–æ—Å –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É –∑–∞–ø—Ä–æ—Å—É
fetch(`/user/1?arc=${arc}`);
````

3. **–°–µ—Ä–≤–µ—Ä** –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç `arc` –ø–∞—Ä–∞–º–µ—Ç—Ä, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã.
4. **–°–µ—Ä–≤–µ—Ä** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ + —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π `ars` —Å–µ–∫—Ü–∏–∏.

```json
{
  "status": {
    "code": 200,
    "message": null
  },
  "data": {
    "id": 1,
    "email": "name@example.com"
  },
  "ars": {
    "comments": {
      "status": {
        "code": 200,
        "message": null
      },
      "collection": [
        {
          "data": {
            "id": 123,
            "text": "–ü–µ—Ä–≤—ã–π"
          }
        },
        {
          "data": {
            "id": 124,
            "text": "–í—Ç–æ—Ä–æ–π"
          }
        }
      ]
    }
  }
}
```

# –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
#### ‚úÖ –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É N+1 –∑–∞–ø—Ä–æ—Å, –ø–æ–∑–≤–æ–ª—è—è –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ 1 –∑–∞–ø—Ä–æ—Å.
#### ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ `REST API` (–∫—ç—à–∏—Ä—É–µ–º–æ—Å—Ç—å, –ø—Ä–æ—Å—Ç–æ—Ç–∞, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å).
#### ‚úÖ –õ–µ–≥–∫–æ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–∏–µ `REST API` –ø—Ä–æ–µ–∫—Ç—ã –ø–æ –º–µ—Ä–µ –Ω–∞–¥–æ–±–Ω–æ—Å—Ç–∏, –±–µ–∑ –≤–Ω–µ—Å–µ–Ω–∏—è —Å–µ—Ä—å—ë–∑–Ω—ã—Ö –ø—Ä–∞–≤–æ–∫.
#### ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–∏–±–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–≤–µ—Ç–∞.
#### ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å - —Å—Ç–∞—Ä—ã–µ –∫–ª–∏–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
#### ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫.
#### ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ         | A8I                       | REST API       | JSON:API                | GraphQL                          |
|--------------------|---------------------------|----------------|-------------------------|----------------------------------|
| –í–Ω–µ–¥—Ä–µ–Ω–∏–µ          | ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ                 | ‚úÖ –ù–∞—Ç–∏–≤–Ω–æ–µ     | ‚ùå –°–ª–æ–∂–Ω–æ–µ               | ‚ùå –°–ª–æ–∂–Ω–æ–µ                        |
| N+1 –ø—Ä–æ–±–ª–µ–º–∞       | ‚úÖ –†–µ—à–∞–µ—Ç—Å—è                | ‚ùå –ù–µ —Ä–µ—à–∞–µ—Ç—Å—è  | ‚úÖ –†–µ—à–∞–µ—Ç—Å—è              | ‚úÖ –†–µ—à–∞–µ—Ç—Å—è                       |
| –ì–∏–±–∫–æ—Å—Ç—å           | ‚úÖ –ì–∏–±–∫–∞—è                  | ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è | ‚úÖ‚ùå –ò–∑–±—ã—Ç–æ—á–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å | ‚úÖ –ì–∏–±–∫–∞—è                         |
| –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ        | ‚úÖ –ù–∞—Ç–∏–≤–Ω–æ–µ                | ‚úÖ –ù–∞—Ç–∏–≤–Ω–æ–µ     | ‚úÖ –ù–∞—Ç–∏–≤–Ω–æ–µ              | ‚ùå –ù–µ—Ç                            |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | ‚úÖ –ë—ã—Å—Ç—Ä–∞—è                 | ‚úÖ –ù–∞—Ç–∏–≤–Ω–∞—è     | ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–∞—è             | ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–∞—è                      |
| –ù–∞—Ç–∏–≤–Ω–æ—Å—Ç—å         | ‚úÖ –ù–∞—Ç–∏–≤–Ω–∞—è                | ‚úÖ –ù–∞—Ç–∏–≤–Ω–∞—è     | ‚ùå –°—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏  | ‚ùå –°—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏           |
| –û—Ç–ª–∞–¥–∫–∞            | ‚úÖ‚ùå –ü—Ä–æ—Å—Ç–∞—è —Å a8i-devtools | ‚úÖ –ù–∞—Ç–∏–≤–Ω–∞—è     | ‚úÖ‚ùå –°–ª–æ–∂–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å    | ‚úÖ‚ùå –î–∞ –≤ devtools, –Ω–æ –Ω–µ—Ç –≤ –ª–æ–≥–∞—Ö |

### –õ–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ç–æ–∫ –æ—Ç –ø—Ä–æ–±–ª–µ–º—ã –∫ —Ä–µ—à–µ–Ω–∏—é

+ –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞.
+ + `HTTP` –∑–∞–ø—Ä–æ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞, –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Å–∞–º –º–∞—Ä—à—Ä—É—Ç. ‚Üì
+ + –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ —Ç–µ–ª–µ `GET` –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ –ø–æ–∑–≤–æ–ª–∏—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å —Å —É—á—ë—Ç–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∞ –≤ –ª–æ–≥–∞—Ö –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –º–∞—Ä—à—Ä—É—Ç –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞. ‚ùå `–û—Ç–∫–ª–æ–Ω–µ–Ω–æ`‚Üì
+ + –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (—É—á—ë—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞). ‚ùå `–û—Ç–∫–ª–æ–Ω–µ–Ω–æ`‚Üì
+ + –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –º–∞—Ä—à—Ä—É—Ç–µ –Ω–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –±–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞. ‚úÖ `–†–µ—à–µ–Ω–æ`.
+ –¢—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–±—Ä–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. ‚Üì
+ + –ï—Å—Ç—å –Ω–∞—Ç–∏–≤–Ω—ã–π `json`, –µ—Å—Ç—å –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π –∏ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π `msgpack`. ‚Üì
+ + –û–±–∞ URL-–Ω–µ–¥—Ä—É–∂–µ–ª—é–±–Ω—ã–µ. –¢—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `base64url` –∏–ª–∏ –¥—Ä—É–≥–∏–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–µ —Ñ–æ—Ä–º–∞—Ç—ã. ‚Üì
+ + –ú–æ–∂–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Ç–∏–≤–Ω—ã–π `json`, –∞ –ø–æ –∂–µ–ª–∞–Ω–∏—é –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç. ‚úÖ `–†–µ—à–µ–Ω–æ`.
+ –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–Ω—è—Ç–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –¥–ª—è `base64url` –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ `json` –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π. ‚Üì
+ + –ï—Å–ª–∏ `a8i` - —ç—Ç–æ `Advanced Request Handling`, —Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —ç—Ç–æ `Advanced Request Container` (`&arc=`). ‚úÖ `–†–µ—à–µ–Ω–æ`.
+ –¢—Ä–µ–±—É–µ—Ç—Å—è —Å–µ–∫—Ü–∏—è –≤ –¥–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∑–∞–ø—Ä–æ—Å, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –æ—Ç–≤–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. ‚Üì
+ + –ï—Å–ª–∏ `arc` - —ç—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—Ä–æ—Å–∞, —Ç–æ —Å–µ–∫—Ü–∏—è –¥–ª—è –æ—Ç–≤–µ—Ç–∞ —ç—Ç–æ `Advanced Response Section` (`ars`). ‚úÖ `–†–µ—à–µ–Ω–æ`.
+ –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–º–µ—Å—Ç–æ `base64url` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ. ‚Üì
+ –¢—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ª–æ–∂–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ `arc`. ‚Üì
+ + –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `json`, –Ω–æ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π `msgpack` –∏–ª–∏ —Å—Ç—Ä–æ–≥–∏–π `protobuf`, —Ç–æ –Ω—É–∂–Ω–æ –¥–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `arc`. ‚Üì
+ + –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `arc_format`. –ò–∑–±—ã—Ç–æ—á–Ω–æ. ‚ùå `–û—Ç–∫–ª–æ–Ω–µ–Ω–æ`‚Üì
+ + –ó–∞—à–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –≤–Ω—É—Ç—Ä–∏ `base64url`. –ù–µ–ø–æ–Ω—è—Ç–Ω–æ –ø–æ–∫–∞ –Ω–µ —Ä–∞—Å–ø–∞–∫—É–µ—à—å, `base64url` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –Ω–æ –Ω–µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π. ‚ùå `–û—Ç–∫–ª–æ–Ω–µ–Ω–æ`‚Üì
+ + –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏ `&arc=anNvbmZvcm1hdA.json64u`, `&arc=bXNncGFja2Y.msgpack64u`. ‚úÖ `–†–µ—à–µ–Ω–æ`.

# –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è

### 1. ARH (Advanced Request Handler)
–°–µ—Ä–≤–µ—Ä–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π:
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `arc`
- –í—ã–ø–æ–ª–Ω—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- –î–æ–±–∞–≤–ª—è–µ—Ç —Å–µ–∫—Ü–∏—é `ars` –∫ –æ—Ç–≤–µ—Ç—É

```php
public function arh(Request $request, Response $response): Response
```
### 2. ARC (Advanced Request Container)
–ë–∏–Ω–∞—Ä–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π:
- –§–æ—Ä–º–∞—Ç: MessagePack + Base64URL
- –°–æ–¥–µ—Ä–∂–∏—Ç:
  - requests - –º–∞—Å—Å–∏–≤ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤
  - options - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

### 3. ARS (Advanced Response Section)
–°–µ–∫—Ü–∏—è —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–≤:
- –ö–ª—é—á–∏: `name` –∏–∑ `arc` –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ ARC
```json
{
  "requests": [
    {
      "name": "string",      // –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é md5hash –æ—Ç path)
      "path": "string",      // –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π URL –º–∞—Ä—à—Ä—É—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ name —ç—Ç–æ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç)
      "method": "GET",       // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é GET)
      "parameters": {},      // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
      "headers": {},         // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
      "body": {}             // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    }
  ],
  "options": {
    "strip_null": true,      // —É–¥–∞–ª—è—Ç—å null –ø–æ–ª—è
    "timeout": 5000          // —Ç–∞–π–º–∞—É—Ç –≤ ms
  }
}
```

### –§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö
+ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `JSON + base64url`.
+ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è: `MessagePack`, `Protobuf` –∏ –¥—Ä—É–≥–∏–µ.
+ –£–∫–∞–∑–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞: `?arc=<json_base64url>.json64u` –∏–ª–∏ `?arc=<msgpack_base64url>.msgpack64u`.

# ‚ùì –í–æ–ø—Ä–æ—Å—ã

### –ü–æ—á–µ–º—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ MessagePack?
–î–∞, –Ω–∞ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö `msgpack` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ ~25% –ª—É—á—à—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –Ω–∞ ~25% –º–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä. \
–î–∞, `msgpack` –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å—Ö–µ–º –∫–∞–∫ `protobuf` –∏–ª–∏ `avro`. \
–ù–æ `msgpack` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Ç–∏–≤–Ω–æ, –Ω—É–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É. \
–ê –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö, –≥–¥–µ `arc` —Å–æ–¥–µ—Ä–∂–∏—Ç 1 - 2 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Ä–∞–∑–Ω–∏—Ü—ã –º–∞–ª–æ. –í–æ—Ç –ø—Ä–∏–º–µ—Ä –Ω–∞ 10 –º–∏–ª–ª–∏–æ–Ω–∞—Ö –∏—Ç–µ—Ä–∞—Ü–∏–π –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è 2 —Ç–∞–∫–∏—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –Ω–∞ `php`:
```php
$arc = [
    'requests' => array_fill(0, 2, [
        'name' => 'news',
        'path' => '/v1/news?rubrics=1,2,3&statuses=published&limit=50'
    ]),
    'options' => [
        'strip_null' => true
    ]
];
while (true) {
    if ($i++ > 10000000) {
        break;
    }
    base64UrlEncode(json_encode($arc, JSON_UNESCAPED_UNICODE));
    // base64UrlEncode(msgpack_pack($arc))
}
```
`json_encode` - –¥–ª–∏–Ω–Ω–∞ base64Url 267, –≤—Ä–µ–º—è 9 —Å–µ–∫—É–Ω–¥. \
`msgpack_pack` - –¥–ª–∏–Ω–Ω–∞ base64Url 224, –≤—Ä–µ–º—è 8 —Å–µ–∫—É–Ω–¥. \
–î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ —ç—Ç–æ –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –∏ –Ω–µ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å `msgpack`. \
–î–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –∫ —Ä–∞–∑–º–µ—Ä—É –¥–∞–Ω–Ω—ã—Ö `a8i` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã.

### –ü–æ—á–µ–º—É –Ω–∞–∑–≤–∞–Ω–∏–µ `a8i`?

`a8i` ‚Äî –ù—É–º–µ—Ä–æ–Ω–∏–º `A<8 —Å–∏–º–≤–æ–ª–æ–≤>I` –æ—Ç `ARH REST API` (Advanced Request Handler REST API)

| –ö–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è | –ü–æ–ª–Ω–æ–µ –∏–º—è                         |
|--------------|------------------------------------|
| a8i          | ARH API                            |
| ARH API      | Advanced Request Handling REST API |


### –ß–µ–º —ç—Ç–æ –ª—É—á—à–µ GraphQL?
+ `a8i` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ `REST`
+ –ø—Ä–æ—â–µ –≤–Ω–µ–¥—Ä—è–µ—Ç—Å—è
+ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∫–∞—Ä—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è
+ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫
+ –±—ã—Å—Ç—Ä–µ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø—Ä–æ—â–µ –ø–∞—Ä—Å–∏–Ω–≥)

### –ß–µ–º —ç—Ç–æ –ª—É—á—à–µ JSON:API?
+ `a8i` –ø—Ä–æ—â–µ –≤–Ω–µ–¥—Ä—è–µ—Ç—Å—è 
+ –±—ã—Å—Ç—Ä–µ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø—Ä–æ—â–µ –ø–∞—Ä—Å–∏–Ω–≥)
+ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∫–∞—Ä—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è
+ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫
+ URL-–¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç `?include=news,comments&filter%5Bnews%5D%5Brubrics%5D=1,2,3&filter%5Bnews%5D%5Bstatuses%5D=published&filter%5Bnews%5D%5Blimit%5D=50&filter%5Bcomments%5D%5Brubrics%5D=1,2,3&filter%5Bcomments%5D%5Bstatuses%5D=published&filter%5Bcomments%5D%5Blimit%5D=50&fields%5Bnews%5D=title,content,created_at&fields%5Bcomments%5D=text,author,created_at`.

### –ù—É–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ API?
–ù–µ—Ç. `a8i` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–∞—à–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ `REST` –º–∞—Ä—à—Ä—É—Ç—ã. –ü–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `arc` –ø–∞—Ä–∞–º–µ—Ç—Ä–∞.

### –í –ª–æ–≥–∞—Ö base64 –Ω–µ–ø–æ–Ω—è—Ç–µ–Ω, –∫–∞–∫ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å?
–ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –∫–∞–∫ –¥–ª—è `a8i`, —Ç–∞–∫ –∏ –¥–ª—è `GraphQL` –∏ `JSON:API` —ç—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å `meta` –ø–∞—Ä–∞–º–µ—Ç—Ä —Å –∫–ª—é—á–µ–≤—ã–º–∏ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–∞–Ω–Ω—ã–º–∏. \
–ù–∞–ø—Ä–∏–º–µ—Ä: `/user/1?arc=eyJyZXF1ZXN0cyI6W3s&meta=news:pub` –¥–ª—è –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π.

### –ï—Å—Ç—å –ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è?
–ë—Ä–∞—É–∑–µ—Ä—ã –ø–æ-—Ä–∞–∑–Ω–æ–º—É –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç –¥–ª–∏–Ω—É –º–∞—Ä—à—Ä—É—Ç–∞, —Ä–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ç.–¥. \
–£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –±—Ä–∞—É–∑–µ—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –¥–ª–∏–Ω—É –ø–æ—Ä—è–¥–∫–∞ 2000 —Å–∏–º–≤–æ–ª–æ–≤, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ 32000 –∏ –¥–∞–∂–µ 64000 –∏ –±–æ–ª—å—à–µ. \
–ï—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏ –∏ –±—Ä–∞—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É –≤ 2000 —Å–∏–º–≤–æ–ª–æ–≤, —Ç–æ —ç—Ç–æ –ø–æ—Ä—è–¥–∫–∞ 20 –≤–æ—Ç —Ç–∞–∫–∏—Ö `json` –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π:
```php
{
    "name": "news",
    "path": "/v1/news?rubrics=1,2,3&statuses=published&limit=50"
}
```
–ò–ª–∏ 22 `msgpack`. \
–ù–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö 300+ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π. \
–í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è 1 - 4 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–µ—Ä—ã:
+ –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
+ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
+ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ (—Ä–µ–∫—É—Ä—Å–∏—è)

# üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

`MIT License` ‚Äî –º–æ–∂–Ω–æ —Å–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.